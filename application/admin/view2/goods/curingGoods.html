<include file="public/layout" />
<include file="public/goodsStyle" />
</head>
<body style="overflow: auto;">
<div id="append_parent"></div>
<div id="ajaxwaitid"></div>
<div class="page">
    <div class="fixed-bar">
        <div class="item-title">
            <div class="subject">
                <h3>商城设置</h3>
                <!-- <h5>网站全局内容基本选项设置</h5> -->
            </div>
            <ul class="tab-base nc-row">
                <li><a href="javascript:void(0);" data-index='1' class="tab current"><span>通用信息</span></a></li>
                <!-- <li><a href="javascript:void(0);" data-index='2' class="tab"><span>商品相册</span></a></li> -->
<!--                 <li><a href="javascript:void(0);" data-index='3' class="tab"><span>商品模型</span></a></li>
                <li><a href="javascript:void(0);" data-index='4' class="tab"><span>商品物流</span></a></li> -->                
            </ul>
        </div>
    </div>
    <!-- 操作说明 -->
<!--     <div class="explanation" id="explanation">
        <div class="title" id="checkZoom"><i class="fa fa-lightbulb-o"></i>
            <h4 title="提示相关设置操作时应注意的要点">操作提示</h4>
            <span id="explanationZoom" title="收起提示"></span> </div>
        <ul>
            <li>请务必正确填写商品信息</li>
            <li>分销比例数不为零为分销商品.</li>
        </ul>
    </div> -->
    <!--表单数据-->
    <form method="post" id="addEditGoodsForm">
        <input type="hidden" name="cat_id" value="{$cat_id}">
<!--通用信息-->
        <div class="ncap-form-default tab_div_1">
            <dl class="row">
                <dt class="tit">
                    <label for="record_no"><em>*</em> 车后养护名称</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.goods_name}" name="goods_name" class="input-txt request"/>
                    <span class="err" id="err_goods_name" style="color:#F00; display:none;">请输入车后养护名称</span>
                </dd>
            </dl>
            <dl class="row">
                <dt class="tit">
                  <em>*</em><label for="record_no">服务范围</label>
                </dt>
                <dd class="opt">
                  <div class="goods_check" checked=""><input type="checkbox" class="all"><span>全选</span></div>
                  <volist name="tags" id="vo">
              
                    <in name="vo.id" value="$gtags" >
                     <div class="goods_check"><input type="checkbox" name="tags[]" value="{$vo.id}" checked="true"><span>{$vo.name}</span></div>
                     </in>
                     <notin  name="vo.id" value="$gtags">
                      <div class="goods_check"><input type="checkbox" name="tags[]" value="{$vo.id}" ><span>{$vo.name}</span></div>
                    </notin>
                   
                  </volist>
                </dd>
            </dl> 
            <dl class="row">
                <dt class="tit">
                    <label for="store_name">产品简介</label>
                </dt>
                <dd class="opt">
                    <textarea rows="3" cols="80" name="goods_remark" class="input-txt">{$goodsInfo.goods_remark}</textarea>
                    <span id="err_goods_remark" class="err" style="color:#F00; display:none;"></span>                    
                </dd>
            </dl> 
            <dl class="row">
              <dt class="tit">
                <label for="t_mane"><em>*</em>是否成为会员产品</label>
              </dt>
              <dd class="opt">
                <div class="onoff">
                  <label for="goods_category1" class="cb-enable <if condition="$goodsInfo[is_vip] eq 1">selected</if>">是</label>
                  <label for="goods_category0" class="cb-disable <if condition="$goodsInfo[is_vip] eq 0">selected</if>">否</label>
                  <input id="goods_category1" name="is_vip" value="1" type="radio" <if condition="$goodsInfo[is_vip] eq 1"> checked="checked"</if>>
                  <input id="goods_category0" name="is_vip" value="0" type="radio" <if condition="$goodsInfo[is_vip] eq 0"> checked="checked"</if>>
                </div>
              </dd>        
          </dl>
             <dl class="row" style="display: none;">
                <dt class="tit">
                    <label for="record_no">会员类型</label>
                </dt>
                <dd class="opt" >
                  <div class="vip_check"><input type="checkbox" class="vip_all"><span>全部</span></div>
                  <volist name="userLevel" id="vo">
                    <in name="vo.level_id" value="$gLevels">
                        <div class="vip_check vip"><input type="checkbox"  name="levels[]" value="{$vo.level_id}"  checked="true"><span>{$vo.level_name}</span></div>
                    </in>
                    <notin name="vo.level_id" value="$gLevels">
                         <div class="vip_check vip"><input type="checkbox"  name="levels[]" value="{$vo.level_id}"><span>{$vo.level_name}</span></div>
                    </notin>  
                </volist>
                    <span class="err" id="err_cat_id" style="color:#F00; display:none;">会员范围必选</span>
                </dd>
            </dl>
			<!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">商品货号</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.goods_sn}" name="goods_sn" class="input-txt"/>
                    <span class="err" id="err_goods_sn" style="color:#F00; display:none;"></span>                
                    <p class="notic">如果不填会自动生成</p>
                </dd>
            </dl>     -->
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">SPU</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.SPU}" name="SPU" class="input-txt"/>
                    <span class="err" id="err_SPU" style="color:#F00; display:none;"></span>
                </dd>
            </dl>     -->
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">SKU</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.SKU}" name="SKU" class="input-txt"/>
                    <span class="err" id="err_SKU" style="color:#F00; display:none;"></span>
                </dd>
            </dl>  -->
<!--             <dl class="row">
                <dt class="tit">
                    <label for="record_no">商品分类</label>
                </dt>
                <dd class="opt">
                      <select name="cat_id" id="cat_id" onChange="get_category(this.value,'cat_id_2','0');" class="small form-control">
                        <option value="0">请选择商品分类</option>                                      
                             <foreach name="cat_list" item="v" key="k" >                                                                                          
                               <option value="{$v['id']}" <if condition="$v['id'] eq $level_cat['1']">selected="selected"</if> >
                                    {$v['name']}
                               </option>
                             </foreach>
                      </select>
                      <select name="cat_id_2" id="cat_id_2" onChange="get_category(this.value,'cat_id_3','0');" class="small form-control">
                        <option value="0">请选择商品分类</option>
                      </select>
                      <select name="cat_id_3" id="cat_id_3" class="small form-control">
                        <option value="0">请选择商品分类</option>
                      </select>                      
                    <span class="err" id="err_cat_id" style="color:#F00; display:none;"></span>
                </dd>
            </dl>             --> 
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">扩展分类</label>
                </dt>
                <dd class="opt">
                  <select name="extend_cat_id" id="extend_cat_id" onChange="get_category(this.value,'extend_cat_id_2','0');" class="small form-control">
                    <option value="0">请选择商品分类</option>                                      
                         <foreach name="cat_list" item="v" key="k" >                                                                                          
                           <option value="{$v['id']}" <if condition="$v['id'] eq $level_cat2['1']">selected="selected"</if> >
                                {$v['name']}
                           </option>
                         </foreach>
                  </select>
                  <select name="extend_cat_id_2" id="extend_cat_id_2" onChange="get_category(this.value,'extend_cat_id_3','0');" class="small form-control">
                    <option value="0">请选择商品分类</option>
                  </select>
                  <select name="extend_cat_id_3" id="extend_cat_id_3" class="small form-control">
                    <option value="0">请选择商品分类</option>
                  </select>                   
                    <span class="err" id="extend_cat_id" style="color:#F00; display:none;"></span>
                </dd>
            </dl>    -->
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">商品品牌</label>
                </dt>
                <dd class="opt">
                <select name="brand_id" id="brand_id"  class="small form-control">
                         <option value="">所有品牌</option>
                        <foreach name="brandList" item="v" key="k" >
                           <option value="{$v['id']}"  <if condition="$v['id'] eq $goodsInfo['brand_id'] ">selected="selected"</if>>
                                {$v['name']}
                           </option>
                         </foreach>
                  </select> 
                </dd>
            </dl>       -->
			<!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">供应商</label>
                </dt>
                <dd class="opt">
                <select name="suppliers_id" id="suppliers_id" class="small form-control">
                    <option value="0">不指定供应商属于本店商品</option>
                    <foreach name="suppliersList" item="v" key="k" >
                        <option value="{$v['suppliers_id']}"  <if condition="$v['suppliers_id'] eq $goodsInfo['suppliers_id'] ">selected="selected"</if>>
                        {$v['suppliers_name']}
                        </option>
                    </foreach>
                </select>
                </dd>
            </dl>   -->
            <dl class="row">
                <dt class="tit">
                    <label for="record_no"><em>*</em> 三品车价</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.shop_price}" name="shop_price" class="t_mane request" onKeyUp="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" />
                    <span class="err" id="err_shop_price" style="color:#F00; display:none;">请输入三品车价</span>
                </dd>
            </dl>             
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">市场价</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.market_price}" name="market_price" class="t_mane" onKeyUp="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" />
                    <span class="err" id="err_market_price" style="color:#F00; display:none;"></span>
                </dd>
            </dl>    -->
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">成本价</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.cost_price}" name="cost_price" class="t_mane" onKeyUp="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" />
                    <span class="err" id="err_cost_price" style="color:#F00; display:none;"></span>
                </dd>
            </dl>  -->
            <!-- <dl class="row">
                <dt class="tit">
                    <label>分享数量</label>
                </dt>
                <dd class="opt">
                    <input type="text" name="share_num" onkeyup="this.value=this.value.replace(/[^\d.]/g,'')" value="{$goodsInfo.share_num}" class="t_mane">
                    <span class="err"></span>
                    <p class="notic">
                       分销成功多少个才能兑换 零代表非分销商品
                    </p>
                </dd>
            </dl> -->
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="store_name">分享描述</label>
                </dt>
                <dd class="opt">
                    <textarea rows="3" cols="80" name="share_desc" class="input-txt">{$goodsInfo.share_desc}</textarea>
                    <span id="err_goods_remark" class="err" style="color:#F00; display:none;"></span>                    
                </dd>
            </dl>
            <dl class="row">
                <dt class="tit">
                    <label>选择兑换商品</label>
                </dt>
                <dd class="opt">
                    <input type="text" readonly  id="goods_name" name="share_gn" value="{$goodsInfo.share_gn}" class="t_mane">
                    <input type="hidden" readonly  id="goods_id" name="share_gid" value="{$goodsInfo.share_gid}" class="t_mane">
                    <input type="hidden" readonly  id="goods_price" name="share_gp" value="{$goodsInfo.share_gp}" class="t_mane">
                    <span class="err">分销兑换</span>
                    <p class="notic">
                        <a onclick="selectGoods()" class="ncap-btn"><i class="fa fa-search"></i>选择商品</a>
                    </p>
                </dd>
            </dl> -->
           
<!--             <dl class="row">
                <dt class="tit">
                    <label for="record_no">佣金</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.commission}" name="commission" class="t_mane" onKeyUp="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" />
                    <span class="err" id="err_commission" style="color:#F00; display:none;"></span>
                    <p class="notic">用于分销的分成金额</p>
                </dd>
            </dl>        -->
            <dl class="row">
                <dt class="tit">
                    <label for="record_no"><em>*</em> 库存数量</label>
                </dt>
                <dd class="opt">                
                    <if condition="$goodsInfo[goods_id] gt 0">
                        <input type="text" value="{$goodsInfo.store_count}" class="t_mane request" name="store_count" onKeyUp="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" />
                    <else />
                        <input type="text" value="{$imshop_config[basic_default_storage]}" class="t_mane request" name="store_count" onKeyUp="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" />                                         
                    </if>
                    <span class="err" id="err_store_count" style="color:#F00; display:none;">请输入库存数量</span>
                </dd>
            </dl>  
                  <dl class="row">
        <dt class="tit"><em>*</em> 列表缩略图</dt>
        <dd class="opt">
           <div class="tab-pane" id="tab_goods_images">
                            <table class="table table-bordered">
                                <tbody>
                                <tr>                                    
                                    <td>                                    
                                    <foreach name="goodsImages" item="vo" key="k" >
                                    <if condition="$goodsInfo['original_img'] neq $vo['image_url']">
                                       <div style="width:100px; text-align:center; margin: 5px;display:inline-block;" class="goods_xc">
                                            <input type="hidden" value="{$vo['image_url']}" name="goods_images[]">
                                            <a onClick="" href="{$vo['image_url']}" target="_blank"><img width="100" height="100" src="{$vo['image_url']}"></a>
                                            <br>
                                            <a href="javascript:void(0)" onClick="ClearPicArr2(this,'{$vo['image_url']}')">删除</a>
                                        </div>
                                         </if>
                                    </foreach>
                                        <div class="goods_xc" style="width:100px; text-align:center; margin: 5px; display:inline-block;">
                                            <input type="hidden" name="goods_images[]" value="" />
                                            <a href="javascript:void(0);" onClick="GetUploadify(10,'','goods','call_back2');"><img src="/public/images/add-button.jpg" width="100" height="100" /></a>
                                            <br/>
                                            <a href="javascript:void(0)">&nbsp;&nbsp;</a>
                                        </div>                                        
                                    </td>
                                </tr>                                              
                                </tbody>
                            </table>
                        </div>
          <div id="thumbnails" class="ncap-thumb-list">
            <h5><i class="fa fa-exclamation-circle"></i> 请上传图片格式文件。</h5>
            <ul>
            </ul>
          </div>
        </dd>
      </dl>                     
		<dl class="row">
        <dt class="tit"><em>*</em> 商品主图</dt>
        <dd class="opt">
          <div class="input-file-show" id="divComUploadContainer">
            <span class="show">
                <a class="nyroModal" rel="gal" href="{$goodsInfo.original_img}">
                    <i class="fa fa-picture-o" onMouseOver="layer.tips('<img src={$goodsInfo.original_img}>',this ,{tips: [1, '#fff']});" onMouseOut="layer.closeAll();"></i>
                </a>
            </span>             
            <span class="type-file-box">            
            <input type="text" id="imagetext" name="original_img" value="{$goodsInfo.original_img}" class="type-file-text">            
            <input type="button" class="type-file-button" onClick="GetUploadify(1,'imagetext','goods','')" value="上传图片"  hidefocus="true" nc_type="change_site_logo" title="点击前方预览图可查看大图，点击按钮选择文件并提交表单后上传生效"/>
            </span>
          </div>
          <div id="thumbnails" class="ncap-thumb-list">
            <h5><i class="fa fa-exclamation-circle"></i> 请上传图片格式文件。</h5>
            <ul>
            </ul>
          </div>
        </dd>
      </dl>   
 
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">商品重量</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.weight}" name="weight" class="t_mane" onKeyUp="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" />
                    <span class="err" id="err_weight" style="color:#F00; display:none;"></span>
                    <p class="notic"> 务必设置商品重量, 用于技术物流费.</p>
                </dd>
            </dl>  
	  <dl class="row">
        <dt class="tit">
          <label>是否包邮</label>
        </dt>
        <dd class="opt">
          <div class="onoff">
            <label for="is_free_shipping1" class="cb-enable <if condition="$goodsInfo[is_free_shipping] eq 1">selected</if>">是</label>
            <label for="is_free_shipping0" class="cb-disable <if condition="$goodsInfo[is_free_shipping] eq 0">selected</if>">否</label>
            <input id="is_free_shipping1" name="is_free_shipping" value="1" type="radio" <if condition="$goodsInfo[is_free_shipping] eq 1"> checked="checked"</if>>
            <input id="is_free_shipping0" name="is_free_shipping" value="0" type="radio" <if condition="$goodsInfo[is_free_shipping] eq 0"> checked="checked"</if>>
          </div>
          <p class="notic"></p>
        </dd>
      </dl>             -->
              
            
            
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">赠送积分</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.give_integral}" name="give_integral" class="t_mane" onKeyUp="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" />
                    <span class="err" id="err_give_integral" style="color:#F00; display:none;"></span>
                </dd>
            </dl>   -->
            
            <!-- <dl class="row">
                <dt class="tit">
                    <label for="record_no">兑换积分</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.exchange_integral}" name="exchange_integral" class="t_mane" onKeyUp="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" />
                    <span class="err" id="err_exchange_integral" style="color:#F00; display:none;"></span>
                </dd>
            </dl>     
            <dl class="row">
                <dt class="tit">
                    <label for="record_no">商品关键词</label>
                </dt>
                <dd class="opt">
                    <input type="text" value="{$goodsInfo.keywords}" name="keywords" class="input-txt"/>
                    <span class="err" id="err_keywords" style="color:#F00; display:none;"></span>
                </dd>
            </dl>        -->
                        <dl class="row">
              <dt class="tit">
                <label for="t_mane"><em>*</em>是否指定商家</label>
              </dt>
              <dd class="opt">
                <div class="onoff">
                  <label for="is_appoint1" class="cb-enable <if condition="$goodsInfo[is_appoint] eq 1">selected</if>">是</label>
                  <label for="is_appoint0" class="cb-disable <if condition="$goodsInfo[is_appoint] eq 0">selected</if>">否</label>
                  <input id="is_appoint1" name="is_appoint" value="1" type="radio" <if condition="$goodsInfo[is_appoint] eq 1"> checked="checked"</if>>
                  <input id="is_appoint0" name="is_appoint" value="0" type="radio" <if condition="$goodsInfo[is_appoint] eq 0"> checked="checked"</if>>
                </div>
              </dd>        
          </dl>
          <dl class="row" style="display: none;">
                <dt class="tit">
                    <label for="record_no"></label>
                </dt>
                <dd class="opt" >
                  <!-- <div class="shop_check"><input type="checkbox" class="shop_all"><span>全部</span></div> -->
                 <!--  <div class="shop_check"><input type="checkbox" class="shop_all"><span>融通汽修</span></div>
                  <div class="shop_check"><input type="checkbox" class="shop_all"><span>融通汽修</span></div>
                  <div class="shop_check"><input type="checkbox" class="shop_all"><span>融通汽修</span></div>
                  <div class="shop_check"><input type="checkbox" class="shop_all"><span>融通汽修</span></div> -->
                   <volist name="usedShop" id="vo">
                  <div class="shop_check"><input type="checkbox" class="shop_all" name="shops[]" value="{$vo['admin_id']}" <if condition="$vo['selected'] eq 1">checked="true"</if>><span>{$vo['shop_name']}</span></div>
                </volist>
                </dd>
            </dl>
                        <dl class="row">
              <dt class="tit">
                <label for="t_mane"><em>*</em>是否指定使用时间</label>
              </dt>
              <dd class="opt">
                <div class="onoff">
                  <label for="is_ctime1" class="cb-enable <if condition="$goodsInfo[is_ctime] eq 1">selected</if>">是</label>
                  <label for="is_ctime0" class="cb-disable <if condition="$goodsInfo[is_ctime] eq 0">selected</if>">否</label>
                  <input id="is_ctime1" name="is_ctime" value="1" type="radio" <if condition="$goodsInfo[is_ctime] eq 1"> checked="checked"</if>>
                  <input id="is_ctime0" name="is_ctime" value="0" type="radio" <if condition="$goodsInfo[is_ctime] eq 0"> checked="checked"</if>>
                </div>
              </dd>        
          </dl>
          <dl class="row" style="display: none;">
                <dt class="tit">
                    <label for="record_no"></label>
                </dt>
                <dd class="opt" >
                  开始日期：<input type="text" id="startTime" name="start_time" <if condition="$times['start_time'] neq 0">value="{$times['start_time']|date='Y-m-d',###}"</if>>
                  结束日期：<input type="text" id="overTime" name="end_time" <if condition="$times['end_time'] neq 0">value="{$times['end_time']|date='Y-m-d',###}"</if>>
                  <script type="text/javascript" src="__PUBLIC__/static/layui/layui.js"></script>
                <!--   <script>
                  var start,over
                  layui.use('laydate', function(){
                    var laydate = layui.laydate;
                    //执行一个laydate实例
                    laydate.render({
                      elem: '#startTime' //指定元素
                      ,showBottom: false
                      // ,done: function(value, date){
                      //   start=value;
                      //   return start
                      // }
                    });
                    laydate.render({
                      elem: '#overTime' //指定元素
                      ,showBottom: false
                    });
                  });
                  </script> -->
                </dd>
            </dl>
            <dl class="row">
                <dt class="tit">
                    <label for="record_no"><em>*</em> 商品详情描述</label>
                </dt>
                <dd class="opt">                    
                    <textarea class="span12 ckeditor" id="goods_content" name="goods_content" title="">{$goodsInfo.goods_content}</textarea>
                    <span class="err" id="err_goods_content" style="color:#F00; display:none;">请输入商品详情描述</span>                    
                </dd>
            </dl>                                                                                                                                           
        </div>
<!--通用信息-->
<!-- 商品相册-->        
<!-- 		<div class="ncap-form-default tab_div_2" style="display:none;">
            <dl class="row">
                
                         <div class="tab-pane" id="tab_goods_images">
                            <table class="table table-bordered">
                                <tbody>
                                <tr>                                    
                                    <td>                                    
                                    <foreach name="goodsImages" item="vo" key="k" >
                                        <div style="width:100px; text-align:center; margin: 5px; display:inline-block;" class="goods_xc">
                                            <input type="hidden" value="{$vo['image_url']}" name="goods_images[]">
                                            <a onClick="" href="{$vo['image_url']}" target="_blank"><img width="100" height="100" src="{$vo['image_url']}"></a>
                                            <br>
                                            <a href="javascript:void(0)" onClick="ClearPicArr2(this,'{$vo['image_url']}')">删除</a>
                                        </div>
                                    </foreach>
                                    
                                        <div class="goods_xc" style="width:100px; text-align:center; margin: 5px; display:inline-block;">
                                            <input type="hidden" name="goods_images[]" value="" />
                                            <a href="javascript:void(0);" onClick="GetUploadify(10,'','goods','call_back2');"><img src="/public/images/add-button.jpg" width="100" height="100" /></a>
                                            <br/>
                                            <a href="javascript:void(0)">&nbsp;&nbsp;</a>
                                        </div>                                        
                                    </td>
                                </tr>                                              
                                </tbody>
                            </table>
                        </div>
                
            </dl>             
        </div>  -->  
<!-- 商品相册-->
<!-- 商品模型-->
		<div class="ncap-form-default tab_div_3" style="display:none;">
            <dl class="row">

                        <div class="tab-pane" id="tab_goods_spec">
                            <table class="table table-bordered" id="goods_spec_table">                                
                                <tr>
                                    <td>商品模型:</td>
                                    <td>                                        
                                      <select name="goods_type" id="spec_type" class="form-control" style="width:250px;">
                                        <option value="0">选择商品模型</option>
                                        <foreach name="goodsType" item="vo" key="k" >
                                            <option value="{$vo.id}"<if condition="$goodsInfo[goods_type] eq $vo[id]"> selected="selected" </if> >{$vo.name}</option>
                                        </foreach>                                        
                                      </select>
                                    </td>
                                </tr>                            
                            </table>
                            <div class="row">
                            	<!-- ajax 返回规格-->
                            	<div id="ajax_spec_data" class="col-xs-8" ></div>
                            	<div id="" class="col-xs-4" >
                            	    <table class="table table-bordered" id="goods_attr_table">                                
		                                <tr>
		                                    <td><b>商品属性</b>：</td>
		                                </tr>                                
		                            </table>
                            	</div>
                            </div>
                        </div>
                
            </dl>             
        </div>   
<!-- 商品模型-->         
<!-- 商品物流-->
		<div class="ncap-form-default tab_div_4" style="display:none;">
            <dl class="row">
                        <div class="tab-pane" id="tab_goods_shipping">
                            <h4><b>物流配送：</b><input type="checkbox" onClick="choosebox(this)">全选</h4>
                            <table class="table table-bordered table-striped dataTable" id="goods_shipping_table">
                                <foreach name="plugin_shipping" item="shipping" key="kk">
                                    <tr>
                                        <td class="title left" style="padding-right:50px;">
                                            <b>{$shipping[name]}：</b>
                                            <label class="right"><input type="checkbox" value="1" cka="mod-{$kk}">全选</label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <ul class="group-list">
                                                <foreach name="shipping_area" item="vv">
                                                    <if condition="$vv[shipping_code] eq $shipping[code]">
                                                        <li><label><input type="checkbox" name="shipping_area_ids[]" value="{$vv.shipping_area_id}" <if condition="in_array($vv['shipping_area_id'],$goods_shipping_area_ids)">checked='checked='</if> ck="mod-{$kk}">{$vv.shipping_area_name}</label></li>
                                                    </if>
                                                </foreach>
                                                <div class="clear-both"></div>
                                            </ul>
                                        </td>
                                    </tr>
                                </foreach>
                            </table>
                        </div>                
            </dl>             
        </div>   
<!-- 商品物流-->

		<div class="ncap-form-default">        
            <div class="bot">            
                <input type="hidden" name="goods_id" value="{$goodsInfo.goods_id}">
                <input type="hidden" name="__token__" value="{$Request.token}" />
                <a href="JavaScript:void(0);" class="ncap-btn-big ncap-btn-green" onClick="ajaxSubmitForm('addEditGoodsForm','{:U('Goods/addEditGoods?is_ajax=1')}');">确认提交</a>
            </div>
        </div> 
     </form>
    <!--表单数据-->
</div>
<div id="goTop"> <a href="JavaScript:void(0);" id="btntop"><i class="fa fa-angle-up"></i></a><a href="JavaScript:void(0);" id="btnbottom"><i class="fa fa-angle-down"></i></a></div>
<script type="text/javascript" src="__PUBLIC__/static/js/addEditGoods.js"></script>
<script>

    // 物流设置相 关
    //  $(document).ready(function(){
    //     $(":checkbox[cka]").click(function(){
    //         var $cks = $(":checkbox[ck='"+$(this).attr("cka")+"']");
    //         if($(this).is(':checked')){
    //             $cks.each(function(){$(this).prop("checked",true);});
    //         }else{
    //             $cks.each(function(){$(this).removeAttr('checked');});
    //         }
    //     });
    // });
    // // 物流设置相 关
    // function choosebox(o){
    //     var vt = $(o).is(':checked');
    //     if(vt){
    //         $('input[type=checkbox]').prop('checked',vt);
    //     }else{
    //         $('input[type=checkbox]').removeAttr('checked');
    //     }
    // }
    /*
     * 以下是图片上传方法
     */
    // //上传商品图片成功回调函数
    // function call_back(fileurl_tmp){
    //     $("#original_img").val(fileurl_tmp);
    // 	$("#original_img2").attr('href', fileurl_tmp);
    // }
 
    // // 上传商品相册回调函数
    // function call_back2(paths){
        
    //     var  last_div = $(".goods_xc:last").prop("outerHTML");	
    //     for (i=0;i<paths.length ;i++ )
    //     {                    
    //         $(".goods_xc:eq(0)").before(last_div);	// 插入一个 新图片
    //             $(".goods_xc:eq(0)").find('a:eq(0)').attr('href',paths[i]).attr('onclick','').attr('target', "_blank");// 修改他的链接地址
    //         $(".goods_xc:eq(0)").find('img').attr('src',paths[i]);// 修改他的图片路径
    //             $(".goods_xc:eq(0)").find('a:eq(1)').attr('onclick',"ClearPicArr2(this,'"+paths[i]+"')").text('删除');
    //         $(".goods_xc:eq(0)").find('input').val(paths[i]); // 设置隐藏域 要提交的值
    //     } 			   
    // }
    /*
     * 上传之后删除组图input     
     * @access   public
     * @val      string  删除的图片input
     */
  //   function ClearPicArr2(obj,path)
  //   {
  //       $(obj).parent().remove();
  //   	$.ajax({
  //                   type:'GET',
  //                   url:"{:U('Admin/Uploadify/delupload')}",
  //                   data:{action:"del", filename:path},
  //                   success:function(){
  //                          $(obj).parent().remove(); // 删除完服务器的, 再删除 html上的图片				 
  //                   }
		// });
		// // 删除数据库记录
  //   	$.ajax({
  //                   type:'GET',
  //                   url:"{:U('Admin/Goods/del_goods_images')}",
  //                   data:{filename:path},
  //                   success:function(){
  //                         //		 
  //                   }
		// });		
  //   }
 


/** 以下 商品属性相关 js*/

// // 属性输入框的加减事件
// function addAttr(a)
// {
// 	var attr = $(a).parent().parent().prop("outerHTML");	
// 	attr = attr.replace('addAttr','delAttr').replace('+','-');	
// 	$(a).parent().parent().after(attr);
// }
// // 属性输入框的加减事件
// function delAttr(a)
// {
//    $(a).parent().parent().remove();
// }
 

/** 以下 商品规格相关 js*/
// $(document).ready(function(){	
//     // 商品模型切换时 ajax 调用  返回不同的属性输入框
//     $("#spec_type").change(function(){        
//         var goods_id = '{$goodsInfo.goods_id}';
//         var spec_type = $(this).val();
//             $.ajax({
//                     type:'GET',
//                     data:{goods_id:goods_id,spec_type:spec_type}, 
//                     url:"{:U('admin/Goods/ajaxGetSpecSelect')}",
//                     success:function(data){                            
//                            $("#ajax_spec_data").html('')
//                            $("#ajax_spec_data").append(data);
// 			   ajaxGetSpecInput();	// 触发完  马上触发 规格输入框
//                     }
//             });           
//             //商品类型切换时 ajax 调用  返回不同的属性输入框     
//             $.ajax({
//                  type:'GET',
//                  data:{goods_id:goods_id,type_id:spec_type}, 
//                  url:"/index.php/admin/Goods/ajaxGetAttrInput",
//                  success:function(data){                            
//                          $("#goods_attr_table tr:gt(0)").remove()
//                          $("#goods_attr_table").append(data);
//                  }        
//            });
//     });
// 	// 触发商品规格
// 	$("#spec_type").trigger('change'); 
	
//     $("input[name='exchange_integral']").blur(function(){
//         var shop_price = parseInt($("input[name='shop_price']").val());
//         var exchange_integral = parseInt($(this).val());
//         if (shop_price * 100 < exchange_integral) {
        	
//         }
//     });
// });

/** 以下是编辑时默认选中某个商品分类*/
$(document).ready(function(){

	<if condition="$level_cat['2'] gt 0">
		 // 商品分类第二个下拉菜单
		 get_category('{$level_cat[1]}','cat_id_2','{$level_cat[2]}');	
	</if>
	<if condition="$level_cat['3'] gt 0">
		// 商品分类第二个下拉菜单
		 get_category('{$level_cat[2]}','cat_id_3','{$level_cat[3]}');	 
	</if>

    //  扩展分类
	<if condition="$level_cat2['2'] gt 0">
		 // 商品分类第二个下拉菜单
		 get_category('{$level_cat2[1]}','extend_cat_id_2','{$level_cat2[2]}');	
	</if>
	<if condition="$level_cat2['3'] gt 0">
		// 商品分类第二个下拉菜单
		 get_category('{$level_cat2[2]}','extend_cat_id_3','{$level_cat2[3]}');	 
	</if>

});
 function hh() {
   // body...
 }
 //    function selectGoods(){
 //        var url = "/index.php/admin/Goods/search_goods.html";
 //        layer.open({
 //            type: 2,
 //            title: '选择商品',
 //            shadeClose: true,
 //            shade: 0.2,
 //            area: ['75%', '75%'],
 //            content: url,
 //        });
 //    }
 // function call_back(goods_id,goods_name,store_count,price){
 //        $('#goods_id').val(goods_id);
 //        $('#goods_name').val(goods_name);
 //        // $('#group_num').val(store_count);
 //        $('#goods_price').val(price);
 //        layer.closeAll('iframe');
 //    }
 //    $(document).ready(function(){
     
 //        //插件切换列表
 //        $('.tab-base').find('.tab').click(function(){
 //            $('.tab-base').find('.tab').each(function(){
 //                $(this).removeClass('current');
 //            });
 //            $(this).addClass('current');
	// 		var tab_index = $(this).data('index');			
	// 		$(".tab_div_1, .tab_div_2, .tab_div_3, .tab_div_4").hide();			
	// 		$(".tab_div_"+tab_index).show();
	// 	});		
            
 //    });

//     //服务范围控制
// $('.all').click(function(){
//   if ($(this).attr("checked")=="checked") {
//     $(this).parent().siblings().children('input').attr("checked","checked")
//   }else{
//     $(this).parent().siblings().children('input').removeAttr("checked")
//   }
// })
// var oths=$('.all').parent().siblings().children('input')
// oths.each(function(){
//   $(this).click(function(){
//     var chknum=$('.all').parent().siblings().children('input').size()
//     var chk=0
//     oths.each(function(){
//       if ($(this).prop("checked")==true) {
//         chk++;
//       }
//     })
//     if (chk==chknum) {
//       $('.all').prop("checked",true)
//     }else{
//       $('.all').prop("checked",false)
//     }
//   })
// })


// //会员控制
// $('.cb-enable').click(function(){
//   $(this).parent().parent().parent().next().show()
// })
// $('.cb-disable').click(function(){
//   $(this).parent().parent().parent().next().hide()
// })
// $('.vip_all').click(function(){
//   if ($(this).attr("checked")=="checked") {
//     $(this).parent().siblings().children('input').attr("checked","checked")
//   }else{
//     $(this).parent().siblings().children('input').removeAttr("checked")
//   }
// })
// var vipoths=$('.vip_all').parent().siblings().children('input')
// vipoths.each(function(){
//   $(this).click(function(){
//     var chknum=$('.vip_all').parent().siblings().children('input').size()
//     var chk=0
//     vipoths.each(function(){
//       if ($(this).prop("checked")==true) {
//         chk++;
//       }
//     })
//     if (chk==chknum) {
//       $('.vip_all').prop("checked",true)
//     }else{
//       $('.vip_all').prop("checked",false)
//     }
//   })
// })

// //会员类型在带入数据的情况下载入后自行判断是否打开
// $(document).ready(function(){
//   if ($("#goods_category1").prop("checked")) {
//     $("#goods_category1").parent().parent().parent().next().show()
//   }
//   if ($("#is_appoint1").prop("checked")) {
//     $("#is_appoint1").parent().parent().parent().next().show()
//   }
//   if ($("#is_ctime1").prop("checked")) {
//     $("#is_ctime1").parent().parent().parent().next().show()
//   }
// })
</script>		
</body>
</html>